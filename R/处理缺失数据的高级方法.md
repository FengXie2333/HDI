# 处理缺失数据的高级方法

## 步骤

1 识别

2 找原因

3 合适的处理



##  缺失数据的分类

**完全随机缺失**（MCAR）：与其他变量都不相关。可以认为完整数据是对整体数据集的随机抽样

**随机缺失**（MAR）：与其他观测变量有关，但与自己的未观测值无关   

如： 体重较小的动物其做梦时长的缺失较大，可能是因为体重小的动物难以观测。而此缺失与动物的做梦时长本身没有关系

**非随机缺失** （NMAR）

***大部分的缺失值处理方法都假定缺失数据是MCAR或MAR***



##  图形探究缺失数据

~~~R
matrixplot(sleep, xlab = colnames(sleep))
~~~



`md.pattern()`生成一个以矩阵或数据框展示的缺失值的模式表格



`aggr()`绘制每个变量的缺失值数，和组合变量的缺失值数



`matrixplot`



`marginplot()`生成一个散点图



## 用相关性探究缺失数据

~~~R
x <- as.data.frame(abs(is.na(sleep))) ##有缺失的值为1 无缺失为0
head(sleep, n=5)
head(x, n=5)
y <- x[which(apply(x,2,sum)>0)] ##提取含缺失值的变量
cor(y)  ##计算缺失变量之间的相关性
cor(sleep, y, use="pairwise.complete.obs") ##计算缺失与不缺失之间的相关性
~~~



![](https://i.loli.net/2018/09/13/5b9a1b80b4e62.jpg)

